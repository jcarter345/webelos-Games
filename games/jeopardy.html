<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Jeopardy - Cub Scouts</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Trebuchet MS', sans-serif; background: #070720; }
  #root { min-height: 100vh; }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script src="../data/jeopardy-themes.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef } = React;

// â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Pick one question at random from each value-level pool.
// Called at the start of every new game so the board varies each time.
function pickQuestions(categories) {
  return categories.map((cat) => ({
    ...cat,
    questions: cat.questions.map((q) => ({
      value: q.value,
      ...q.pool[Math.floor(Math.random() * q.pool.length)],
    })),
  }));
}

// Dynamically load a theme's question JS file and return a promise
// that resolves to the question array (the global variable it creates).
function loadThemeData(theme) {
  return new Promise((resolve, reject) => {
    // Already loaded in a previous round?
    if (window[theme.dataVar]) { resolve(window[theme.dataVar]); return; }
    const script = document.createElement("script");
    script.src = "../data/" + theme.dataFile;
    script.onload = () => {
      if (window[theme.dataVar]) resolve(window[theme.dataVar]);
      else reject(new Error("Data variable " + theme.dataVar + " not found after loading " + theme.dataFile));
    };
    script.onerror = () => reject(new Error("Failed to load " + theme.dataFile));
    document.head.appendChild(script);
  });
}

// Read ?theme=<id> query param for direct-linking.
function getThemeFromURL() {
  const params = new URLSearchParams(window.location.search);
  const id = params.get("theme");
  if (!id) return null;
  return JEOPARDY_THEMES.find((t) => t.id === id) || null;
}

const TEAM_COLORS = ["#e94560", "#0ea5e9", "#22c55e", "#f59e0b", "#a78bfa", "#ec4899"];

// â”€â”€ ThemePicker â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function ThemePicker({ onSelect }) {
  const [loading, setLoading] = useState(false);

  const handlePick = (theme) => {
    setLoading(true);
    loadThemeData(theme).then((data) => {
      onSelect(theme, data);
    });
  };

  // Auto-select if ?theme=<id> is present
  useEffect(() => {
    const urlTheme = getThemeFromURL();
    if (urlTheme) handlePick(urlTheme);
  }, []);

  return (
    <div style={{ minHeight: "100vh", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", background: "linear-gradient(145deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)", padding: 20 }}>
      <div style={{ textAlign: "center", marginBottom: 40 }}>
        <div style={{ fontSize: 48, marginBottom: 8 }}>âšœï¸</div>
        <h1 style={{ fontSize: 32, fontWeight: 900, color: "#f8fafc", margin: 0, letterSpacing: 2, textTransform: "uppercase" }}>Jeopardy</h1>
        <p style={{ color: "#94a3b8", fontSize: 14, marginTop: 8, letterSpacing: 1 }}>PICK YOUR ADVENTURE</p>
      </div>

      {loading ? (
        <div style={{ color: "#94a3b8", fontSize: 16 }}>Loading questions...</div>
      ) : (
        <div style={{ display: "flex", gap: 20, flexWrap: "wrap", justifyContent: "center", maxWidth: 700 }}>
          {JEOPARDY_THEMES.map((theme) => (
            <button key={theme.id} onClick={() => handlePick(theme)}
              style={{ background: "rgba(255,255,255,0.05)", borderRadius: 16, padding: "32px 28px", width: 300, border: "2px solid rgba(255,255,255,0.1)", cursor: "pointer", textAlign: "left", transition: "all 0.2s", display: "flex", flexDirection: "column", gap: 12 }}
              onMouseEnter={(e) => { e.currentTarget.style.borderColor = "#f59e0b"; e.currentTarget.style.background = "rgba(245,158,11,0.06)"; }}
              onMouseLeave={(e) => { e.currentTarget.style.borderColor = "rgba(255,255,255,0.1)"; e.currentTarget.style.background = "rgba(255,255,255,0.05)"; }}>
              <div style={{ fontSize: 40 }}>{theme.emoji}</div>
              <div style={{ color: "#f8fafc", fontWeight: 800, fontSize: 18, lineHeight: 1.3 }}>{theme.name}</div>
              <div style={{ color: "#94a3b8", fontSize: 14, lineHeight: 1.5 }}>{theme.description}</div>
              <div style={{ marginTop: 8, color: "#f59e0b", fontWeight: 700, fontSize: 13, textTransform: "uppercase", letterSpacing: 1 }}>Play â†’</div>
            </button>
          ))}
        </div>
      )}
    </div>
  );
}

// â”€â”€ ConfettiEffect â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function ConfettiEffect() {
  const canvasRef = useRef(null);
  useEffect(() => {
    const canvas = canvasRef.current;
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const particles = Array.from({ length: 80 }, () => ({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height - canvas.height,
      w: Math.random() * 10 + 5,
      h: Math.random() * 6 + 3,
      color: TEAM_COLORS[Math.floor(Math.random() * 6)],
      vy: Math.random() * 3 + 2,
      vx: (Math.random() - 0.5) * 2,
      rot: Math.random() * 360,
      rv: (Math.random() - 0.5) * 8,
    }));
    let frame;
    const animate = () => {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach((p) => {
        p.y += p.vy; p.x += p.vx; p.rot += p.rv;
        ctx.save(); ctx.translate(p.x, p.y); ctx.rotate((p.rot * Math.PI) / 180);
        ctx.fillStyle = p.color; ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h); ctx.restore();
      });
      if (particles.some((p) => p.y < canvas.height + 50)) frame = requestAnimationFrame(animate);
    };
    animate();
    return () => cancelAnimationFrame(frame);
  }, []);
  return React.createElement("canvas", { ref: canvasRef, style: { position: "fixed", top: 0, left: 0, width: "100%", height: "100%", pointerEvents: "none", zIndex: 999 } });
}

// â”€â”€ TeamSetup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function TeamSetup({ theme, onStart }) {
  const [numTeams, setNumTeams] = useState(2);
  const [names, setNames] = useState(["Den 1", "Den 2"]);
  const handleNumChange = (n) => {
    setNumTeams(n);
    setNames((prev) => {
      const newNames = [...prev];
      while (newNames.length < n) newNames.push("Team " + (newNames.length + 1));
      return newNames.slice(0, n);
    });
  };
  return (
    <div style={{ minHeight: "100vh", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", background: "linear-gradient(145deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)", padding: 20 }}>
      <div style={{ textAlign: "center", marginBottom: 40 }}>
        <div style={{ fontSize: 48, marginBottom: 8 }}>{theme.emoji}</div>
        <h1 style={{ fontSize: 36, fontWeight: 900, color: "#f8fafc", margin: 0, letterSpacing: 2, textTransform: "uppercase" }}>{theme.name} Jeopardy</h1>
        <p style={{ color: "#94a3b8", fontSize: 14, marginTop: 8, letterSpacing: 1 }}>{theme.name.toUpperCase()} ADVENTURE</p>
      </div>
      <div style={{ background: "rgba(255,255,255,0.05)", borderRadius: 16, padding: 32, maxWidth: 420, width: "100%", border: "1px solid rgba(255,255,255,0.1)" }}>
        <label style={{ color: "#94a3b8", fontSize: 13, textTransform: "uppercase", letterSpacing: 1, display: "block", marginBottom: 12 }}>Number of Teams</label>
        <div style={{ display: "flex", gap: 8, marginBottom: 28 }}>
          {[2, 3, 4, 5, 6].map((n) => (
            <button key={n} onClick={() => handleNumChange(n)} style={{ flex: 1, padding: "10px 0", borderRadius: 8, border: numTeams === n ? "2px solid #f59e0b" : "2px solid rgba(255,255,255,0.1)", background: numTeams === n ? "rgba(245,158,11,0.15)" : "transparent", color: numTeams === n ? "#f59e0b" : "#64748b", fontWeight: 700, fontSize: 18, cursor: "pointer" }}>{n}</button>
          ))}
        </div>
        {names.slice(0, numTeams).map((name, i) => (
          <div key={i} style={{ marginBottom: 12 }}>
            <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 4 }}>
              <div style={{ width: 12, height: 12, borderRadius: "50%", background: TEAM_COLORS[i] }} />
              <label style={{ color: "#94a3b8", fontSize: 12, textTransform: "uppercase", letterSpacing: 1 }}>Team {i + 1}</label>
            </div>
            <input value={name} onChange={(e) => { const n = [...names]; n[i] = e.target.value; setNames(n); }} style={{ width: "100%", padding: "10px 14px", borderRadius: 8, border: "1px solid rgba(255,255,255,0.15)", background: "rgba(255,255,255,0.05)", color: "#f8fafc", fontSize: 16, outline: "none", boxSizing: "border-box" }} />
          </div>
        ))}
        <button onClick={() => onStart(names.slice(0, numTeams))} style={{ width: "100%", marginTop: 20, padding: "14px 0", borderRadius: 10, border: "none", background: "linear-gradient(135deg, #f59e0b, #ef4444)", color: "#fff", fontWeight: 800, fontSize: 18, cursor: "pointer", letterSpacing: 1, textTransform: "uppercase" }}>Start Game ğŸ¯</button>
      </div>
    </div>
  );
}

// â”€â”€ QuestionModal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function QuestionModal({ category, questionData, onCorrect, onWrong, onClose, teams, activeTeam }) {
  const [phase, setPhase] = useState("answer");
  const [showHint, setShowHint] = useState(false);
  return (
    <div style={{ position: "fixed", inset: 0, zIndex: 100, display: "flex", alignItems: "center", justifyContent: "center", background: "rgba(0,0,0,0.85)", backdropFilter: "blur(8px)", padding: 20 }} onClick={(e) => { if (e.target === e.currentTarget && phase === "result") onClose(); }}>
      <div style={{ background: "linear-gradient(160deg, " + category.color + ", #0a0a1a)", borderRadius: 20, padding: 40, maxWidth: 600, width: "100%", border: "2px solid " + category.accent + "40", position: "relative", boxShadow: "0 0 60px " + category.accent + "20" }}>
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 24 }}>
          <div style={{ display: "flex", alignItems: "center", gap: 8 }}>
            <span style={{ fontSize: 24 }}>{category.emoji}</span>
            <span style={{ color: category.accent, fontWeight: 700, textTransform: "uppercase", letterSpacing: 1, fontSize: 14 }}>{category.name}</span>
          </div>
          <span style={{ background: category.accent + "25", color: category.accent, padding: "4px 14px", borderRadius: 20, fontWeight: 800, fontSize: 18 }}>${questionData.value}</span>
        </div>

        {phase === "answer" && (
          <div>
            <div style={{ color: "#e2e8f0", fontSize: 15, textTransform: "uppercase", letterSpacing: 1, marginBottom: 12, opacity: 0.6 }}>The Answer Is...</div>
            <div style={{ color: "#f8fafc", fontSize: 24, fontWeight: 700, lineHeight: 1.4, marginBottom: 32 }}>{questionData.answer}</div>
            {showHint && (
              <div style={{ background: "rgba(245,158,11,0.1)", border: "1px solid rgba(245,158,11,0.3)", borderRadius: 10, padding: "12px 16px", marginBottom: 24 }}>
                <span style={{ color: "#f59e0b", fontWeight: 600, fontSize: 13 }}>ğŸ’¡ HINT: </span>
                <span style={{ color: "#fbbf24", fontSize: 14 }}>{questionData.hint}</span>
              </div>
            )}
            <div style={{ display: "flex", gap: 10 }}>
              {!showHint && <button onClick={() => setShowHint(true)} style={{ flex: 1, padding: "12px 0", borderRadius: 10, border: "1px solid rgba(245,158,11,0.4)", background: "transparent", color: "#f59e0b", fontWeight: 700, fontSize: 14, cursor: "pointer" }}>ğŸ’¡ Show Hint</button>}
              <button onClick={() => setPhase("question")} style={{ flex: 2, padding: "12px 0", borderRadius: 10, border: "none", background: category.accent, color: "#fff", fontWeight: 800, fontSize: 15, cursor: "pointer", letterSpacing: 0.5 }}>Reveal the Question â–¶</button>
            </div>
          </div>
        )}

        {phase === "question" && (
          <div>
            <div style={{ color: "#e2e8f0", fontSize: 15, textTransform: "uppercase", letterSpacing: 1, marginBottom: 12, opacity: 0.6 }}>The Correct Question Is...</div>
            <div style={{ color: "#4ade80", fontSize: 22, fontWeight: 700, lineHeight: 1.4, marginBottom: 16, padding: "16px 20px", background: "rgba(74,222,128,0.08)", borderRadius: 12, borderLeft: "4px solid #4ade80" }}>{questionData.question}</div>
            <div style={{ color: "#94a3b8", fontSize: 14, marginBottom: 20, textAlign: "center" }}>Answering: <strong style={{ color: TEAM_COLORS[activeTeam] }}>{teams[activeTeam]}</strong></div>
            <div style={{ display: "flex", gap: 10 }}>
              <button onClick={() => { onWrong(); setPhase("result"); }} style={{ flex: 1, padding: "14px 0", borderRadius: 10, border: "2px solid #ef444480", background: "rgba(239,68,68,0.1)", color: "#ef4444", fontWeight: 800, fontSize: 15, cursor: "pointer" }}>âœ• Incorrect</button>
              <button onClick={() => { onCorrect(); setPhase("result"); }} style={{ flex: 1, padding: "14px 0", borderRadius: 10, border: "none", background: "#22c55e", color: "#fff", fontWeight: 800, fontSize: 15, cursor: "pointer" }}>âœ“ Correct!</button>
            </div>
          </div>
        )}

        {phase === "result" && (
          <div style={{ textAlign: "center" }}>
            <div style={{ fontSize: 48, marginBottom: 12 }}>ğŸ‘</div>
            <div style={{ color: "#f8fafc", fontSize: 20, fontWeight: 700, marginBottom: 24 }}>Score Updated!</div>
            <button onClick={onClose} style={{ padding: "12px 40px", borderRadius: 10, border: "none", background: category.accent, color: "#fff", fontWeight: 700, fontSize: 15, cursor: "pointer" }}>Back to Board</button>
          </div>
        )}
      </div>
    </div>
  );
}

// â”€â”€ App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

function App() {
  const [gameState, setGameState] = useState("theme-select");
  const [theme, setTheme] = useState(null);
  const [questionBank, setQuestionBank] = useState(null);
  const [categories, setCategories] = useState([]);
  const [teams, setTeams] = useState([]);
  const [scores, setScores] = useState([]);
  const [answered, setAnswered] = useState(new Set());
  const [activeQuestion, setActiveQuestion] = useState(null);
  const [activeTeam, setActiveTeam] = useState(0);
  const [showConfetti, setShowConfetti] = useState(false);
  const totalQuestions = categories.reduce((sum, c) => sum + c.questions.length, 0);

  const handleThemeSelect = (selectedTheme, data) => {
    setTheme(selectedTheme);
    setQuestionBank(data);
    setCategories(pickQuestions(data));
    document.title = selectedTheme.name + " Jeopardy - Cub Scouts";
    setGameState("setup");
  };

  const startGame = (teamNames) => { setCategories(pickQuestions(questionBank)); setTeams(teamNames); setScores(new Array(teamNames.length).fill(0)); setGameState("playing"); };
  const handleCorrect = () => { const s = [...scores]; s[activeTeam] += activeQuestion.questionData.value; setScores(s); };
  const handleWrong = () => {};
  const handleClose = () => {
    const key = activeQuestion.catIdx + "-" + activeQuestion.qIdx;
    const na = new Set(answered); na.add(key); setAnswered(na); setActiveQuestion(null);
    setActiveTeam((prev) => (prev + 1) % teams.length);
    if (na.size === totalQuestions) { setGameState("finished"); setShowConfetti(true); }
  };

  if (gameState === "theme-select") return <ThemePicker onSelect={handleThemeSelect} />;
  if (gameState === "setup") return <TeamSetup theme={theme} onStart={startGame} />;

  if (gameState === "finished") {
    const maxScore = Math.max(...scores);
    const winners = teams.filter((_, i) => scores[i] === maxScore);
    return (
      <div style={{ minHeight: "100vh", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", background: "linear-gradient(145deg, #0a0a1a 0%, #1a1a3e 50%, #0a0a1a 100%)", padding: 20 }}>
        {showConfetti && <ConfettiEffect />}
        <div style={{ fontSize: 64, marginBottom: 16 }}>ğŸ†</div>
        <h1 style={{ color: "#f8fafc", fontSize: 36, fontWeight: 900, margin: "0 0 8px 0", textAlign: "center" }}>Game Over!</h1>
        <p style={{ color: "#f59e0b", fontSize: 20, fontWeight: 700, marginBottom: 32 }}>{winners.length === 1 ? winners[0] + " Wins!" : "It's a tie!"}</p>
        <div style={{ display: "flex", gap: 16, flexWrap: "wrap", justifyContent: "center", marginBottom: 32 }}>
          {teams.map((name, i) => (
            <div key={i} style={{ background: "rgba(255,255,255,0.05)", borderRadius: 12, padding: "20px 32px", textAlign: "center", border: scores[i] === maxScore ? "2px solid " + TEAM_COLORS[i] : "1px solid rgba(255,255,255,0.1)" }}>
              <div style={{ color: TEAM_COLORS[i], fontWeight: 800, fontSize: 18, marginBottom: 4 }}>{name}</div>
              <div style={{ color: "#f8fafc", fontWeight: 900, fontSize: 32 }}>${scores[i]}</div>
              {scores[i] === maxScore && <div style={{ marginTop: 4, fontSize: 20 }}>ğŸ¥‡</div>}
            </div>
          ))}
        </div>
        <div style={{ display: "flex", gap: 12 }}>
          <button onClick={() => { setCategories(pickQuestions(questionBank)); setGameState("setup"); setAnswered(new Set()); setActiveTeam(0); setShowConfetti(false); }} style={{ padding: "14px 36px", borderRadius: 10, border: "none", background: "linear-gradient(135deg, #f59e0b, #ef4444)", color: "#fff", fontWeight: 800, fontSize: 16, cursor: "pointer", letterSpacing: 1 }}>Play Again</button>
          <button onClick={() => { setGameState("theme-select"); setTheme(null); setQuestionBank(null); setCategories([]); setTeams([]); setScores([]); setAnswered(new Set()); setActiveTeam(0); setShowConfetti(false); }} style={{ padding: "14px 36px", borderRadius: 10, border: "2px solid rgba(255,255,255,0.2)", background: "transparent", color: "#94a3b8", fontWeight: 800, fontSize: 16, cursor: "pointer", letterSpacing: 1 }}>Change Theme</button>
        </div>
      </div>
    );
  }

  return (
    <div style={{ minHeight: "100vh", background: "linear-gradient(160deg, #070720, #0f0f2e 40%, #0a0a1a)", padding: "12px 12px 80px" }}>
      <div style={{ textAlign: "center", padding: "12px 0 8px" }}>
        <h1 style={{ fontSize: 22, fontWeight: 900, color: "#f8fafc", margin: 0, letterSpacing: 2, textTransform: "uppercase" }}>{theme.emoji} {theme.name} Jeopardy</h1>
      </div>
      <div style={{ display: "flex", gap: 8, justifyContent: "center", flexWrap: "wrap", margin: "8px 0 16px" }}>
        {teams.map((name, i) => (
          <div key={i} style={{ background: activeTeam === i ? TEAM_COLORS[i] + "20" : "rgba(255,255,255,0.04)", borderRadius: 10, padding: "8px 18px", textAlign: "center", border: activeTeam === i ? "2px solid " + TEAM_COLORS[i] : "1px solid rgba(255,255,255,0.08)", transition: "all 0.3s", minWidth: 90 }}>
            <div style={{ color: TEAM_COLORS[i], fontWeight: 700, fontSize: 12, textTransform: "uppercase", letterSpacing: 0.5 }}>{name}</div>
            <div style={{ color: "#f8fafc", fontWeight: 900, fontSize: 22 }}>${scores[i]}</div>
          </div>
        ))}
      </div>
      <div style={{ textAlign: "center", marginBottom: 12 }}>
        <span style={{ color: "#64748b", fontSize: 13 }}>Selecting: </span>
        <span style={{ color: TEAM_COLORS[activeTeam], fontWeight: 700, fontSize: 14 }}>{teams[activeTeam]}</span>
      </div>
      <div style={{ display: "grid", gridTemplateColumns: "repeat(4, 1fr)", gap: 8, maxWidth: 800, margin: "0 auto" }}>
        {categories.map((cat) => (
          <div key={cat.name} style={{ textAlign: "center", padding: "10px 4px", borderRadius: 10, background: "linear-gradient(180deg, " + cat.accent + "30, transparent)", borderBottom: "3px solid " + cat.accent }}>
            <div style={{ fontSize: 20 }}>{cat.emoji}</div>
            <div style={{ color: cat.accent, fontWeight: 800, fontSize: 11, textTransform: "uppercase", letterSpacing: 1, lineHeight: 1.3, marginTop: 2 }}>{cat.name}</div>
          </div>
        ))}
        {[0, 1, 2, 3, 4].map((qIdx) =>
          categories.map((cat, catIdx) => {
            const key = catIdx + "-" + qIdx;
            const isAnswered = answered.has(key);
            const q = cat.questions[qIdx];
            return (
              <button key={key} disabled={isAnswered} onClick={() => setActiveQuestion({ catIdx, qIdx, category: cat, questionData: q })}
                style={{ padding: "16px 4px", borderRadius: 10, border: isAnswered ? "1px solid rgba(255,255,255,0.03)" : "1px solid " + cat.accent + "30", background: isAnswered ? "rgba(255,255,255,0.02)" : "linear-gradient(160deg, " + cat.color + ", rgba(0,0,0,0.4))", color: isAnswered ? "#334155" : cat.accent, fontWeight: 900, fontSize: 22, cursor: isAnswered ? "default" : "pointer", transition: "all 0.2s", opacity: isAnswered ? 0.3 : 1 }}>
                {isAnswered ? "â€”" : "$" + q.value}
              </button>
            );
          })
        )}
      </div>
      <div style={{ textAlign: "center", marginTop: 16, color: "#334155", fontSize: 12 }}>{answered.size} / {totalQuestions} questions answered</div>
      {activeQuestion && <QuestionModal category={activeQuestion.category} questionData={activeQuestion.questionData} onCorrect={handleCorrect} onWrong={handleWrong} onClose={handleClose} teams={teams} activeTeam={activeTeam} />}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
